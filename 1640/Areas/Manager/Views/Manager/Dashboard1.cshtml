
@{
    ViewData["Title"] = "Dashboard1";
    Layout = "~/Areas/Manager/Views/Shared/_LayoutManager.cshtml";
}

@model List<SemesterArticleVM>

<!-- Include necessary libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>

<!-- Chart container -->
<div id="chart-container">
    <canvas id="myChart" width="300" height="300"></canvas>
</div>
<style>
    #chart-container {
        width: 80%;
        margin: 20px auto;
        background-color: #f8f9fa; /* Set background color */
        border-radius: 5px; /* Add border radius */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Add shadow */
        padding: 20px; /* Add padding */
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif
    }
</style>
<script>
    // Get data from the model
    var semesterNames = [];
    var articleCounts = [];
    @foreach (var item in Model)
    {
        <text>semesterNames.push('@item.SemesterName');</text>
        <text>articleCounts.push('@item.ArticleCount');</text>
    }

    // Create the chart
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: semesterNames,
            datasets: [{
                label: 'Magazines',
                fontSize: 20,
                fontFamily: 'Calibri',
                data: articleCounts,
                backgroundColor: semesterNames.map(function(semester, index) {
                    return createGradient(ctx, index);
                }),
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            title: {
                display: true,
                text: 'Number of Magazines per Semester',
                fontSize: 25, // Adjust the font size if needed
                fontFamily: 'Calibri', // Adjust the font family if needed
                fontColor: '#333' // Adjust the font color if needed
            },
            scales: {
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Semester',
                        fontSize: 20,
                        fontFamily: 'Calibri'
                    }
                }],
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        stepSize: 1,
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Magazines',
                        fontSize: 20,
                        fontFamily: 'Calibri'
                    }
                }]
            }
        }
    });   
    function createGradient(ctx, index) {
        var gradient = ctx.createLinearGradient(0, 0, 400, 0); // Change the gradient direction and size as needed
        gradient.addColorStop(0, 'rgba(' + Math.floor(Math.random()*256) + ',' + Math.floor(Math.random()*256) + ',' + Math.floor(Math.random()*256) + ',0.8)'); // Start color
        gradient.addColorStop(1, 'rgba(' + Math.floor(Math.random()*256) + ',' + Math.floor(Math.random()*256) + ',' + Math.floor(Math.random()*256) + ',0.8)'); // End color
        return gradient;
    }
</script>
@functions {
    string GetStatusClass(Article.StatusArticle status)
    {
        switch (status)
        {
            case Article.StatusArticle.Pending:
                return "status-pending";
            case Article.StatusArticle.Reject:
                return "status-rejected";
            case Article.StatusArticle.Approve:
                return "status-approved";
            default:
                return "";
        }
    }
}
